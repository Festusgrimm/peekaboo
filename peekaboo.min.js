!function(e){"use strict";var t=function(){var t,n,r,o,i,a=150,c={},u="IntersectionObserver"in e,s={},l=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,e[r])},d=function(e,t){for(var n=e.getBoundingClientRect(),r=n.top,a=n.left,c=n.height,u=n.width,e=e.parentNode;e!=document.body;){if(n=e.getBoundingClientRect(),!f(r,a,u,c,n.top,n.left,n.width,n.height,t))return!1;e=e.parentNode}return f(r,a,u,c,0,0,o,i,t)},p=function(e,t){var n=e.getBoundingClientRect();return f(n.top,n.left,n.width,n.height,0,0,o,i,t)},f=function(e,t,n,r,o,i,a,c,u){return!(o-(r+u)>e||e>o+c+u||i-(n+u)>t||t>i+a+u)},h=function(){var a,u,s,f,h,v=document,y=0,m=0;o=e.innerWidth,i=e.innerHeight,"undefined"==typeof n||"undefined"==typeof n.tagName?v=document:n&&(v=n);for(h in c)c.hasOwnProperty(h)&&(a=[],u=v.querySelectorAll(h+":not([data-peekaboo])"),m+=u.length,s=c[h].rootMargin,f=c[h].fastVisibilityCheck?p:d,l(u,function(e){f(e,s)&&(e.setAttribute("data-peekaboo",h),a.push(e))}),a.length&&(y+=a.length,c[h].callback(a)));m-y>0&&!t?b():!m&&t&&g(),r=!1},b=function(){document.addEventListener("scroll",v,!0),e.addEventListener("resize",v),t=!0},g=function(){document.removeEventListener("scroll",v),e.removeEventListener("resize",v),t=!1},v=function(e){r||(n=e&&e.target?e.target:void 0,requestAnimationFrame(h)),r=!0},y=function(){var e,t;for(e in c)c.hasOwnProperty(e)&&(t=c[e].rootMargin,s.hasOwnProperty(t)||(s[t]=new IntersectionObserver(w,{rootMargin:t+"px"})),l(document.querySelectorAll(e+":not([data-peekaboo])"),function(n){n.setAttribute("data-peekaboo",e),s[t].observe(n)}))},m=function(e){var t;if(c.hasOwnProperty(e)&&(t=c[e].rootMargin,l(document.querySelectorAll(e),function(e){e.removeAttribute("data-peekaboo"),u&&s[t].unobserve(e)}),delete c[e],s.hasOwnProperty(t))){for(e in c)if(c.hasOwnProperty(e)&&c[e].rootMargin==t)return;delete s[t]}},w=function(e){var t,n={};e.forEach(function(e){var t=e.target.getAttribute("data-peekaboo");c.hasOwnProperty(t)&&(t in n||(n[t]=[]),n[t].push(e.target),s[c[t].rootMargin].unobserve(e.target),e.target.removeAttribute("data-peekaboo"))});for(t in n)n.hasOwnProperty(t)&&c[t].callback(n[t])},k=function(e){return e?{observe:function(t){if("object"==typeof t){if(!t.hasOwnProperty("pattern")||!t.pattern)throw"No CSS Selector passed within initialisation Object [pattern]";try{document.querySelectorAll(t.pattern+":not([data-peekaboo])")}catch(n){throw"Could not instantiate the CSS Selector [pattern]: "+t.pattern}if(t.pattern in c)throw"The CSS Selector [pattern] is already being observed: "+t.pattern;c[t.pattern]={callback:t.callback,fastVisibilityCheck:!!t.fastVisibilityCheck,rootMargin:t.hasOwnProperty("rootMargin")&&parseInt(t.rootMargin,10)==t.rootMargin?t.rootMargin:a}}e()},unobserve:m,supported:!0}:{observe:function(){},unobserve:function(){},supported:!1}};return k("IntersectionObserver"in e?y:"requestAnimationFrame"in e&&"querySelectorAll"in document&&"addEventListener"in document&&"getBoundingClientRect"in document.createElement("div")?v:!1)}();e.peekaboo=t}(window);
